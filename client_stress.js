var net = require('net'),
    JsonSocket = require('json-socket');

var stdio = require('stdio');


var port = 9838; //The same port that the server is listening on
var host = '127.0.0.1';
var socket = new JsonSocket(new net.Socket()); // Decorate a standard net.Socket with JsonSocket



socket.connect(port, host);
socket.on('connect', function() 
	{ //Don't send until we're connected
    socket.sendMessage( {"id":"1122","source":"xxx","datalen":"13","data":[{"name":"pv1","val":"121"},
{"name":"pv112","val":"122"},
{"name":"pv112","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv562","val":"122"},
{"name":"pv782","val":"122"},
{"name":"pv222","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv542","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv122","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv672","val":"122"},
{"name":"pv112","val":"122"},
{"name":"pv112","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv562","val":"122"},
{"name":"pv782","val":"122"},
{"name":"pv222","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv542","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv122","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv672","val":"122"},
{"name":"pv112","val":"122"},
{"name":"pv112","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv562","val":"122"},
{"name":"pv782","val":"122"},
{"name":"pv222","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv542","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv122","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv672","val":"122"},
{"name":"pv112","val":"122"},
{"name":"pv112","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv562","val":"122"},
{"name":"pv782","val":"122"},
{"name":"pv222","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv542","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv122","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv672","val":"122"},
{"name":"pv112","val":"122"},
{"name":"pv112","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv562","val":"122"},
{"name":"pv782","val":"122"},
{"name":"pv222","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv542","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv122","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv672","val":"122"},
{"name":"pv112","val":"122"},
{"name":"pv112","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv562","val":"122"},
{"name":"pv782","val":"122"},
{"name":"pv222","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv542","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv122","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv672","val":"122"},
{"name":"pv112","val":"122"},
{"name":"pv112","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv562","val":"122"},
{"name":"pv782","val":"122"},
{"name":"pv222","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv542","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv122","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv672","val":"122"},
{"name":"pv112","val":"122"},
{"name":"pv112","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv562","val":"122"},
{"name":"pv782","val":"122"},
{"name":"pv222","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv542","val":"122"},
{"name":"pv232","val":"122"},
{"name":"pv122","val":"122"},
{"name":"pv342","val":"122"},
{"name":"pv672","val":"122"},
{"name":"pv892","val":"122"},
{"name":"pv332","val":"122"}],
"hextail":"abc"} );

    socket.on('message', function(message) 
		{
        console.log('The result is: '+message.result);
    });
});

